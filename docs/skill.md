---
name: paper-reader
description: 系统化论文阅读与代码分析工具，采用三轮递归式笔记方法。适用于：(1) 分析学术论文并生成结构化笔记，(2) 阅读GitHub代码仓库，(3) 文献综述，(4) 论文审稿。触发词：「读论文」「分析论文」「看这篇paper」「读代码」「分析repo」「文献调研」。输出带Excalidraw图的中文笔记文档。
---

# 论文与代码阅读技能

基于三轮递归式方法的系统化阅读工具。核心理念：**外部笔记文件作为持久状态**，Agent持续读取、编辑、更新。

## 核心工作流

### 输出文件

| 任务类型 | 输出文件 | 内容 |
|---------|---------|------|
| 论文阅读 | `paper_notes.md` | 结构化笔记 + 嵌入PNG图 |
| 代码阅读 | `code_notes.md` | 结构化笔记 + 嵌入PNG图 |

### 图表生成

使用 `scripts/excalidraw_to_png.py` 将Excalidraw JSON转换为PNG：

```bash
python scripts/excalidraw_to_png.py input.excalidraw output.png
```

---

## Part A: 论文阅读流程

### 第一轮：鸟瞰扫描 (5-10分钟)

**目标**：获取基本信息，过滤无用页面，为后续聚焦做准备

**执行步骤**：

1. 读取标题、摘要、引言
2. 扫描章节标题（不读内容）
3. 读结论
4. 扫描参考文献

**收集元信息**：

- 论文类型：[实证/理论/系统/综述]
- 是否有代码：[有/无] → 链接：[URL]
- 核心贡献：[1-2句话]
- 关键页面：[如 p3-5方法, p6-8实验]
- 可跳过页面：[如 p9-10附录, p2相关工作详细]
- 5C评估：Category / Context / Correctness / Contributions / Clarity

**创建初始 `paper_notes.md`**（见 `references/note_templates.md`）

### 第二轮：内容理解 (~1小时)

**目标**：把握论文内容，但不深入细节

**执行步骤**：

1. **聚焦阅读**：只读第一轮标记的关键页面
2. **图表分析**：检查坐标轴、误差线、统计显著性
3. **记录要点**：边读边更新笔记
4. **标记引用**：记录需要追读的参考文献

**更新 `paper_notes.md` 的第二轮部分**

### 第三轮：深度理解 (2-5小时)

**目标**：深入方法细节，构建数学框架，生成可视化图表

**执行步骤**：

1. **虚拟重现**：假设自己是作者，从头推导
2. **数学框架**：用统一的数学语言重新表述
3. **批判性分析**：挑战每个假设，找出隐含前提
4. **生成图表**：

**图1：论文结构图 (`paper_outline.png`)**
- 问题定义 → 方法核心模块 → 实验验证 → 主要结论

**图2：方法流程图 (`paper_method.png`)**
- 输入 → 每个处理步骤 → 中间表示 → 输出

**最终更新 `paper_notes.md`**，嵌入生成的PNG图

---

## Part B: 代码阅读流程

**前置**：克隆仓库（跳过LFS）

```bash
GIT_LFS_SKIP_SMUDGE=1 git clone --depth 1 [repo_url]
```

### 第一轮：仓库概览

**目标**：理解代码结构，定位关键文件

1. 读 README.md
2. 扫描目录结构 (`tree -L 2`)
3. 识别入口文件
4. 定位核心模块目录

**创建 `code_notes.md`**，**生成仓库结构图 (`repo_structure.png`)**

### 第二轮：数据接口设计

**目标**：理解数据流，明确接口设计

1. 分析数据加载代码
2. 理解数据预处理流程
3. 明确模型输入输出格式
4. 追踪tensor形状变化

**更新 `code_notes.md`**

### 第三轮：核心方法实现

**目标**：深入理解关键算法实现

1. 逐行阅读核心模块代码
2. 理解关键函数实现
3. 对照论文公式与代码
4. 标注代码与论文的对应关系

**最终更新 `code_notes.md`**，**生成代码架构图 (`code_method.png`)**

---

## 递归编辑原则

1. **状态持久化**：所有进度保存在外部md文件
2. **增量更新**：每轮只更新对应section
3. **时间戳记录**：每次更新记录时间
4. **状态标记**：清晰标注当前阅读进度
5. **可中断恢复**：任何时候可暂停，下次从笔记恢复

## 资源

- **笔记模板**: `references/note_templates.md`
- **图表模板**: `references/excalidraw_templates.md`
- **转换脚本**: `scripts/excalidraw_to_png.py`